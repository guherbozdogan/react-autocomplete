<!DOCTYPE html>
<html>
  <head>
    <title>autocomplete</title>
    <meta charset="utf-8">
    <style>
      .autocomplete {
        display: inline-block;
        position: relative;
      }
      .autocomplete__text-box {
        width: 200px;
      }
      .autocomplete__menu {
        position: absolute;
        top: 100%;
        right: 0;
        left: 0;
      }
    </style>
  </head>
  <body>
    <div class="autocomplete">
      <input type="text" class="autocomplete__text-box" tabindex="1" />
      <div class="autocomplete__menu"></div>
    </div>
    <input type="text" tabindex="1" />
    <script src="/lib/index.js"></script>
    <script>
      const items = [
        {
          value: 'Ada',
          keys: ['ada'],
          type: 'foo'
        },
        {
          value: 'Brainfuck',
          keys: ['brainfuck', 'esoteric'],
          type: 'foo'
        },
        {
          value: 'LOLCODE',
          keys: ['lolcode', 'lolspeak', 'esoteric'],
          type: 'foo'
        },
        {
          value: 'Ruby on Rails',
          keys: ['ruby on rails', 'ruby', 'rails'],
          type: 'foo'
        },
        {
          value: 'Java',
          keys: ['java'],
          type: 'bar'
        },
        {
          value: 'JavaScript',
          keys: ['javascript', 'js'],
          type: 'bar'
        },
        {
          value: 'Node.js',
          keys: ['javascript', 'js', 'node', 'node.js', 'nodejs'],
          type: 'bar'
        }
      ];
      var inputElement = document.querySelector('.autocomplete__text-box');
      var menuContainerElement = document.querySelector('.autocomplete__menu');
      window.autoComplete(inputElement, menuContainerElement, {
        getItems: function(value) {
          inputElement.style.backgroundColor = 'yellow';
          return new Promise(function(callback) {
            setTimeout(function() {
              inputElement.style.backgroundColor = 'white';
              callback(items);
            }, 500);
          });
        },
        renderMenuElement: function(matchedItem) {
          const menuItemElement = document.createElement('div');
          menuItemElement.innerHTML = matchedItem.value;
          menuItemElement.classList.add(matchedItem.type);
          return menuItemElement;
        },
        renderMenuElements: function(menuElements, menuContainerElement) {
          menuElements.forEach(function(menuElement) {
            menuContainerElement.appendChild(menuElement);
          });
        },
        highlightMenuElement: function(item, menuElement) {
          menuElement.style.color = 'white';
          menuElement.style.backgroundColor = 'blue';
        },
        unhighlightMenuElement: function(item, menuElement) {
          menuElement.style.color = 'black';
          menuElement.style.backgroundColor = 'transparent';
        },
        selectMenuElement: function(item, matchedElement) {
          console.log('selectMenuElement', item);
          matchedElement.style.color = 'white';
          matchedElement.style.backgroundColor = 'green';
        },
        enterKeyDown: function(value) {
          console.log('enterKeyDown', value);
        }
      });
    </script>
  </body>
</html>
